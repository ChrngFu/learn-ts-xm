import{h as e,i as s,b as t}from"../element-plus/element-plus.cb05fe15.js";import{l as a}from"../localforage/localforage.e647ef54.js";import{C as r,r as i,c as o,a4 as l,a as n,S as p,Q as u,o as m,af as c,ag as d,aj as f}from"../@vue/@vue.fedea094.js";import{_ as j}from"../../index-f9e5b7bd.js";import"../dayjs/dayjs.341dffa3.js";import"../@element-plus/@element-plus.b2370078.js";import"../lodash-es/lodash-es.9c91e0f2.js";import"../@vueuse/@vueuse.0f7aa3eb.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../autofit.js/autofit.js.7791d2f0.js";import"../vue-router/vue-router.165ab965.js";import"../echarts/echarts.6b41119b.js";import"../zrender/zrender.ec62154b.js";import"../tslib/tslib.a4e99503.js";const g=a.createInstance({name:"LocalData"});function v(s){const{message:t,type:a="info",duration:r=2e3}=s;e({message:t,type:a,duration:r})}g.config({driver:a.INDEXEDDB});const h=e=>(c("data-v-cef5783b"),e=e(),d(),e),y={id:"use-indexDB"},_=h((()=>n("br",null,null,-1))),I={class:"file-list"},x=h((()=>n("div",{class:"el-upload__tip"},"jpg/png files with a size less than 500KB.",-1))),b=j(r({__name:"UseIndexedDB",setup(e){const a=i(),r=i([]);g.getItem("fileList").then((e=>{e&&e.forEach((e=>{r.value.push(e)}))}));const c=(e,s)=>{s.findIndex((s=>s.name===e.name))!==s.findLastIndex((s=>s.name===e.name))&&(s.pop(),v({message:"文件重复，已删除",type:"warning"})),r.value=s},d=()=>{const e=[];r.value.forEach((s=>{e.push(f(s))})),g.setItem("fileList",e).then((()=>{v({message:"文件上传成功！",type:"success"})})).catch((()=>{v({message:"文件上传失败！",type:"error"})}))};return(e,i)=>{const f=t,j=s;return m(),o("div",y,[l(" IndexedDB "),_,n("div",I,[p(j,{ref_key:"uploadRef",ref:a,"file-list":r.value,"onUpdate:fileList":i[0]||(i[0]=e=>r.value=e),action:"",multiple:"","auto-upload":!1,"on-change":c},{trigger:u((()=>[p(f,{type:"primary"},{default:u((()=>[l("选择文件")])),_:1})])),tip:u((()=>[x])),default:u((()=>[p(f,{type:"success",style:{"margin-left":"12px"},onClick:d},{default:u((()=>[l("点击上传文件")])),_:1})])),_:1},8,["file-list"])])])}}}),[["__scopeId","data-v-cef5783b"]]);export{b as default};
