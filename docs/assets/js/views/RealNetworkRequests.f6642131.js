import{c as e,E as t,d as a,b as s,e as r}from"../element-plus/element-plus.0d666ce7.js";import{a as o}from"../axios/axios.743c2fba.js";import{_ as i}from"../../index-f1c6a649.js";import{e as n,G as l,n as u,u as d,C as m,r as p,c,a as f,S as v,Q as y,o as g,a4 as b,ac as h,ad as w,d as j}from"../@vue/@vue.a9179d5c.js";import{l as L}from"../echarts/echarts.6b41119b.js";import"../dayjs/dayjs.ad630e9f.js";import"../@element-plus/@element-plus.1bc9458c.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../@vueuse/@vueuse.eeab3f20.js";import"../lodash-es/lodash-es.4ce650f4.js";import"../@popperjs/@popperjs.b78c3215.js";import"../autofit.js/autofit.js.7791d2f0.js";import"../vue-router/vue-router.9bab3f1d.js";import"../zrender/zrender.ec62154b.js";import"../tslib/tslib.a4e99503.js";const x=o.create({baseURL:"",timeout:5e3});x.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),x.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));const _=async(e,t)=>(await x.post(e,t,{headers:{"platform-type":"MULTI"}})).data;function C(e,t=null,a=!0,s=!0){let r=null;const o=()=>{const t=d(e);t&&d(t)&&(r=L.init(t))},i=()=>{null==r||r.resize()},m=()=>{s&&(e.value.style.transition="width 1s, height 1s");new ResizeObserver((e=>{const{clientWidth:t,clientHeight:a}=e[0].target;0!==t&&0!==a&&i()})).observe(e.value)},p=()=>{r||o(),null==r||r.hideLoading()};return t?(window.addEventListener("resize",i),a&&m()):n((()=>{window.addEventListener("resize",i),a&&m()})),l((()=>{window.removeEventListener("resize",i)}),t),{setOption:e=>{u((()=>{(r||(o(),r))&&(r.setOption(e),p())}))},getInstance:()=>(r||o(),r),showLoading:()=>{r||o(),null==r||r.showLoading()},hideLoading:p}}const D=e=>(h("data-v-1bfe209c"),e=e(),w(),e),V={id:"real-network-requests"},E={class:"query-bar"},S={class:"query-bar-item"},Y=D((()=>f("div",null,"选择时间：",-1))),q={class:"query-btn"},z=D((()=>f("br",null,null,-1))),R=i(m({__name:"RealNetworkRequests",setup(o){const i=p((new Date).format()),l=p(null),u={tooltip:{trigger:"axis"},grid:{top:"10%",left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{axisLabel:{interval:0,formatter:e=>{const t=e.length;if(t>10){return e.substring(0,10)+"\n"+e.substring(10,t)}return e}},data:[]},yAxis:{},series:[{name:"站点日碳排放量",type:"bar",data:[]}]},{setOption:d,showLoading:m}=C(l),h=async()=>{m();const e=await(t={time:i.value},_("/uas/v1/admin/resourceAnalysis/queryCarbonEmissionEveryDay",t));var t;if(0===e.code){const{carbonEmissions:t}=e.data;u.xAxis.data=t.map((e=>e.siteName)),u.series[0].data=t.map((e=>e.value)),d(u)}};n(h);const w=p(!1),L=p(1),x=p(null),D=j();let R=null;const k=async()=>{const{getInstance:e}=C(x,D);!R&&(R=e()),null==R||R.clear(),null==R||R.showLoading();const t={type:L.value,uuid:"d6dca475-b6e1-4481-afa1-58377ec3f51b"},a=await(s=t,_("/uas/v1/admin/site/forecast/oneSite",s));var s;if(0===a.code){const{getSiteDownCurve:e,getSiteSupplyEnergyCurve:t,getSiteTypeCurve:s,getSiteUpCurve:r}=a.data.SiteLoadForecastDayResponse,o={tooltip:{trigger:"axis"},grid:{top:"10%",left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{data:e.map((e=>e.time))},yAxis:{},dataZoom:[{type:"slider",start:0,end:30,showDetail:!1}],series:[{name:"基础负荷",type:"line",data:s.map((e=>e.forecastPower))},{name:"可上调负荷",type:"line",data:r.map((e=>e.forecastPower))},{name:"可下调负荷",type:"line",data:e.map((e=>e.forecastPower))},{name:"最大供给能力",type:"line",data:t.map((e=>e.forecastPower))}]};null==R||R.setOption(o)}null==R||R.hideLoading()};return(o,n)=>{const u=e,d=t,m=r,p=a,j=s;return g(),c("div",V,[f("ul",E,[f("li",S,[Y,v(u,{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=e=>i.value=e),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",placeholder:"选择日期时间"},null,8,["modelValue"])]),f("div",q,[v(d,{type:"primary",onClick:h},{default:y((()=>[b("查询")])),_:1})])]),f("div",{class:"daily-carbon-emissions-chart",ref_key:"emissionsChartRef",ref:l},null,512),z,v(d,{type:"primary",onClick:n[1]||(n[1]=e=>w.value=!0)},{default:y((()=>[b("查看详情")])),_:1}),f("div",null,[v(p,{modelValue:L.value,"onUpdate:modelValue":n[2]||(n[2]=e=>L.value=e)},{default:y((()=>[v(m,{label:1},{default:y((()=>[b("电")])),_:1}),v(m,{label:2},{default:y((()=>[b("热")])),_:1}),v(m,{label:3},{default:y((()=>[b("冷")])),_:1})])),_:1},8,["modelValue"])]),v(j,{title:"查看详情",modelValue:w.value,"onUpdate:modelValue":n[3]||(n[3]=e=>w.value=e),onOpened:k,width:"80%"},{default:y((()=>[f("div",{ref_key:"dialogChartRef",ref:x,class:"dialog-chart"},null,512)])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-1bfe209c"]]);export{R as default};
