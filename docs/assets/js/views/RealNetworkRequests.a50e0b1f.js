import{e,b as a,f as t,d as s,g as r}from"../element-plus/element-plus.50667e6f.js";import{a as o}from"../axios/axios.743c2fba.js";import{u as l}from"../useEcharts/useEcharts.35019ae6.js";import{C as i,r as n,e as u,c as d,a as p,S as m,Q as c,o as f,a4 as v,af as y,ag as b,d as g}from"../@vue/@vue.fedea094.js";import{_ as j}from"../../index-1a034529.js";import"../dayjs/dayjs.e1eaed1c.js";import"../@element-plus/@element-plus.b2370078.js";import"../lodash-es/lodash-es.9c91e0f2.js";import"../@vueuse/@vueuse.0f7aa3eb.js";import"../@popperjs/@popperjs.b78c3215.js";import"../@ctrl/@ctrl.91de2ec7.js";import"../echarts/echarts.6b41119b.js";import"../zrender/zrender.ec62154b.js";import"../tslib/tslib.a4e99503.js";import"../autofit.js/autofit.js.7791d2f0.js";import"../vue-router/vue-router.165ab965.js";import"../nprogress/nprogress.c6946b8a.js";const h=o.create({baseURL:"",timeout:5e3});h.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),h.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));const w=async(e,a)=>(await h.post(e,a,{headers:{"platform-type":"MULTI"}})).data,x=e=>(y("data-v-4637b4c2"),e=e(),b(),e),_={id:"real-network-requests"},C={class:"query-bar"},D={class:"query-bar-item"},L=x((()=>p("div",null,"选择时间：",-1))),V={class:"query-btn"},q=x((()=>p("br",null,null,-1))),S=j(i({__name:"RealNetworkRequests",setup(o){const i=n((new Date).format()),y=n(null),b={tooltip:{trigger:"axis"},grid:{top:"10%",left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{axisLabel:{interval:0,formatter:e=>{const a=e.length;if(a>10){return e.substring(0,10)+"\n"+e.substring(10,a)}return e}},data:[]},yAxis:{},series:[{name:"站点日碳排放量",type:"bar",data:[]}]},{setOption:j,showLoading:h}=l(y),x=async()=>{h();const e=await(a={time:i.value},w("/uas/v1/admin/resourceAnalysis/queryCarbonEmissionEveryDay",a));var a;if(0===e.code){const{carbonEmissions:a}=e.data;b.xAxis.data=a.map((e=>e.siteName)),b.series[0].data=a.map((e=>e.value)),j(b)}};u(x);const S=n(!1),Y=n(1),k=n(null),A=g();let E=null;const P=async()=>{const{getInstance:e}=l(k,A);!E&&(E=e()),null==E||E.clear(),null==E||E.showLoading();const a={type:Y.value,uuid:"d6dca475-b6e1-4481-afa1-58377ec3f51b"},t=await(s=a,w("/uas/v1/admin/site/forecast/oneSite",s));var s;if(0===t.code){const{getSiteDownCurve:e,getSiteSupplyEnergyCurve:a,getSiteTypeCurve:s,getSiteUpCurve:r}=t.data.SiteLoadForecastDayResponse,o={tooltip:{trigger:"axis"},grid:{top:"10%",left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{data:e.map((e=>e.time))},yAxis:{},dataZoom:[{type:"slider",start:0,end:30,showDetail:!1}],series:[{name:"基础负荷",type:"line",data:s.map((e=>e.forecastPower))},{name:"可上调负荷",type:"line",data:r.map((e=>e.forecastPower))},{name:"可下调负荷",type:"line",data:e.map((e=>e.forecastPower))},{name:"最大供给能力",type:"line",data:a.map((e=>e.forecastPower))}]};null==E||E.setOption(o)}null==E||E.hideLoading()};return(o,l)=>{const n=e,u=a,b=r,g=t,j=s;return f(),d("div",_,[p("ul",C,[p("li",D,[L,m(n,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",placeholder:"选择日期时间"},null,8,["modelValue"])]),p("div",V,[m(u,{type:"primary",onClick:x},{default:c((()=>[v("查询")])),_:1})])]),p("div",{class:"daily-carbon-emissions-chart",ref_key:"emissionsChartRef",ref:y},null,512),q,m(u,{type:"primary",onClick:l[1]||(l[1]=e=>S.value=!0)},{default:c((()=>[v("查看详情")])),_:1}),p("div",null,[m(g,{modelValue:Y.value,"onUpdate:modelValue":l[2]||(l[2]=e=>Y.value=e)},{default:c((()=>[m(b,{label:1},{default:c((()=>[v("电")])),_:1}),m(b,{label:2},{default:c((()=>[v("热")])),_:1}),m(b,{label:3},{default:c((()=>[v("冷")])),_:1})])),_:1},8,["modelValue"])]),m(j,{title:"查看详情",modelValue:S.value,"onUpdate:modelValue":l[3]||(l[3]=e=>S.value=e),onOpened:P,width:"80%"},{default:c((()=>[p("div",{ref_key:"dialogChartRef",ref:k,class:"dialog-chart"},null,512)])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-4637b4c2"]]);export{S as default};
